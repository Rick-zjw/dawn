<!-- ===== Reviews Section Start ===== -->
<style>

  .reviews-section{ background:#F1F1F1; padding:var(--pad-y) 0; }
  .reviews{ max-width:var(--container-w); margin-inline:auto; padding-inline:var(--pad-x); }
  .reviews__title{ color:#222; text-align:center; font-size:40px; font-weight:600; margin-bottom:48px; }

  .reviews__list{ display:flex; gap:20px;  }
  .review-card{
    background:#fff; padding:32px; display:flex; flex-direction:column; gap:16px;
    box-shadow:0 4px 12px rgba(0,0,0,.06); flex:1 1 320px; min-width:280px;
  }

  .review-card__header{ display:flex; flex-direction:column; gap:16px; }
  .review-card__stars path{ fill:#FBCB05; }

  .review-card__user{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
  .review-card__avatar{ width:40px; height:40px; border-radius:50%; background:#ddd; object-fit:cover; }
  .review-card__name{ font-weight:600; font-size:16px; color:#222; }

  .review-card__content{ font-size:16px; line-height:1.5; color:#444; }

  .review-card__product{ display:flex; align-items:center; gap:16px; border-top:1px solid #eee; padding-top:16px; margin-top:auto; }
  .review-card__product-img{ width:80px; height:80px;  background:#eee; object-fit:cover; }
  .review-card__product-info{ display:flex; flex-direction:column; gap:4px; }
  .review-card__product-title{ font-size:16px; font-weight:600; color:#222; }
  .review-card__product-price{ font-size:16px; font-weight:600; color:#036AFF; }
  .review-card__product-price del{ font-size:14px; font-weight:400; color:#999; margin-left:8px; }
   @media (max-width:1024px){
   .reviews__list{overflow-x:auto;}
  }
  @media (max-width:768px){
    .review-card__product{ flex-direction:column; align-items:flex-start; }
    .review-card__product-img{ width:100%; max-width:240px; height:auto; }
  }
</style>

<section class="reviews-section">
  <div class="reviews">
    {% if section.settings.title != blank %}
      <h2 class="reviews__title">{{ section.settings.title }}</h2>
    {% endif %}

    <div class="reviews__list">
      {% for block in section.blocks %}
        {% if block.type == 'review' %}
          <article class="review-card" {{ block.shopify_attributes }}>
            <div class="review-card__header">
              {% if block.settings.show_stars %}
                {% assign rating = block.settings.rating | default: 5 | plus: 0 %}
                <div class="review-card__stars" aria-label="{{ rating }} out of 5 stars">
                  <svg width="120" height="24" viewBox="0 0 120 24" xmlns="http://www.w3.org/2000/svg" role="img" focusable="false">
                    {% for i in (0..4) %}
                      <path class="star {% if i < rating %}star--filled{% endif %}"
                            d="M5.825 21L7.45 13.975L2 9.25L9.2 8.625L12 2L14.8 8.625L22 9.25L16.55 13.975L18.175 21L12 17.275L5.825 21Z"
                            transform="translate({{ i | times: 24 }},0)"/>
                    {% endfor %}
                  </svg>
                </div>
              {% endif %}

              <div class="review-card__user">
                <span class="review-card__name">{{ block.settings.reviewer | default: 'Anonymous' }}</span>
                {% if block.settings.avatar != blank %}
                  <img class="review-card__avatar"
                       src="{{ block.settings.avatar | image_url: width: 80 }}"
                       alt="{{ block.settings.reviewer | escape }}">
                {% endif %}
              </div>
            </div>

            {% if block.settings.content != blank %}
              <p class="review-card__content">{{ block.settings.content }}</p>
            {% endif %}

            {% assign p = block.settings.product %}
            {% if p != blank %}
              {% assign v = p.selected_or_first_available_variant %}
              {% assign price = v.price %}
              {% assign compare = v.compare_at_price %}

              <div class="review-card__product">
                {% if v.image %}
                  <a href="{{ p.url }}"><img class="review-card__product-img" src="{{ v.image | image_url: width: 240 }}" alt="{{ p.title | escape }}"></a>
                {% elsif p.featured_image %}
                  <a href="{{ p.url }}"><img class="review-card__product-img" src="{{ p.featured_image | image_url: width: 240 }}" alt="{{ p.title | escape }}"></a>
                {% endif %}

                <div class="review-card__product-info">
                  <p class="review-card__product-title">
                    <a href="{{ p.url }}">{{ p.title }}</a>
                  </p>

                  <span class="review-card__product-price">
                    {{ price | money }}
                    {% if compare and compare > price %}
                      <del>{{ compare | money }}</del>
                      {% comment %} {% assign off_pct = 100 | minus: (price | times:100 | divided_by: compare | round) %}
                      <span class="review-card__product-badge">-{{ off_pct }}%</span> {% endcomment %}
                    {% endif %}
                  </span>
                </div>
              </div>
            {% endif %}
          </article>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Reviews cards",
  "settings": [
    { "type": "text", "id": "title", "label": "Section title", "default": "Trusted by 1,000+ Knife Owners" }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review card",
      "settings": [
        { "type": "checkbox", "id": "show_stars", "label": "Show stars", "default": true },
        { "type": "range", "id": "rating", "label": "Rating (1â€“5)", "min": 1, "max": 5, "step": 1, "default": 5 },

        { "type": "image_picker", "id": "avatar", "label": "Reviewer avatar" },
        { "type": "text", "id": "reviewer", "label": "Reviewer name", "default": "KKF Member" },
        { "type": "textarea", "id": "content", "label": "Review content" },

        { "type": "product", "id": "product", "label": "Linked product" }
      ]
    }
  ],
  "max_blocks": 12,
  "presets": [{ "name": "Reviews cards" }]
}
{% endschema %}
<!-- ===== Reviews Section End ===== -->
